<html class="reftest-wait">
<body>
<script>
  function checkEvents(test, callback) {
    const detailsElement = document.getElementById("detailsElement");
    detailsElement.addEventListener("toggle", callback, { once: true });
    detailsElement.setAttribute("open", "");

    test();

    detailsElement.removeAttribute("open");
  }

const xsltString1 = `
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
      <xsl:include href="1941002.sjs"/>
      <xsl:template match="/">
      </xsl:template>
    </xsl:stylesheet>
  `;
  const xsltString2 = `
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
      <xsl:template match="/">
      </xsl:template>
    </xsl:stylesheet>
  `;

  const parser = new DOMParser();
  let xsltDoc1 = parser.parseFromString(xsltString1, "application/xml");
  let xsltDoc2 = parser.parseFromString(xsltString2, "application/xml");

  addEventListener("load", () => {
    let xsltProcessor = new XSLTProcessor();
    checkEvents(() => {
      xsltProcessor.importStylesheet(xsltDoc1);
    }, () => {
      xsltProcessor.importStylesheet(xsltDoc2);
    });

    delete xsltProcessor;

    SpecialPowers.forceGC();
    SpecialPowers.forceCC();

    delete xsltDoc1;
    delete xsltDoc2;

    SpecialPowers.forceGC();
    SpecialPowers.forceCC();

    document.documentElement.classList.remove("reftest-wait");
  });
</script>
<details id="detailsElement"></details>
</body>
</html>
